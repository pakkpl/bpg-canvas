!function(){"use strict";angular.module("bpgCanvas",[]).directive("bpgCanvas",["$injector",function(t){function e(e,a){function r(){var t=a[0].childNodes[0];if(!e.src)return t.width=0,void(t.height=0);var r=t.getContext("2d"),n=new Worker(o||"/js/bpg-worker.min.js");n.onmessage=function(a){if(!a.data.error){t.width=a.data.width,t.height=a.data.height;var o=r.createImageData(t.width,t.height);o.data.set(a.data.image),r.putImageData(o,0,0)}e.onComplete?e.$apply(function(){e.onComplete({error:a.data.error})}):console.log(a.data.error)},n.postMessage(e.src)}var o;try{o=t.get("bpgCanvasWorkerUrl")}catch(n){}e.$watch("src",r)}return{restrict:"E",link:e,template:'<canvas width="0" height="0"></canvas>',scope:{src:"@src",onComplete:"&onComplete"}}}])}();